<nav class="bg-white shadow-md fixed w-full z-50">
  <div class="container mx-auto flex items-center justify-between px-4 py-3">
    <!-- Brand -->
    <a href="{% url 'home:doctor' %}" 
       class="text-2xl font-bold bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent flex items-center">
      <i class="bi bi-heart-pulse-fill me-2 text-red-500"></i>CareMate
    </a>

    <!-- Mobile toggle -->
    <button id="menu-toggle" class="lg:hidden text-gray-600 focus:outline-none">
      <i class="bi bi-list text-2xl"></i>
    </button>

    <!-- Links -->
    <div id="menu" class="hidden lg:flex items-center gap-6">
      <!-- Search -->
      <form method="GET" action="{% url 'home:search' %}" class="relative">
        <input type="text" name="q" placeholder="Search..."
          class="rounded-full px-4 py-2 border border-indigo-300 focus:ring-2 focus:ring-indigo-500 focus:outline-none">
      </form>

      {% if request.user.role == 'patient' %}
      <a href="{% url 'home:doctor' %}" class="font-medium text-gray-700 hover:text-indigo-600">Home</a>
      <a href="{% url 'profile:view_appointments' %}" class="font-medium text-gray-700 hover:text-indigo-600">Appointments</a>
      <a href="{% url 'profile:profile_patient' %}" class="font-medium text-gray-700 hover:text-indigo-600">Profile</a>
      {% endif %}
      {% if user.is_authenticated %}
      <form method="post" action="{% url 'user_account:logout' %}">
        {% csrf_token %}
        <button type="submit"
          class="bg-red-500 text-white rounded-full px-4 py-2 hover:bg-red-600 transition">
          Logout
        </button>
      </form>
      {% else %}
      <a href="{% url 'user_account:login' %}" 
         class="bg-indigo-500 text-white rounded-full px-4 py-2 hover:bg-indigo-600 transition">
        Login
      </a>
      <a href="{% url 'user_account:sign-up' %}" 
         class="border border-indigo-500 text-indigo-500 rounded-full px-4 py-2 hover:bg-indigo-50 transition">
        Sign up
      </a>
      {% endif %}
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden flex-col gap-4 px-4 py-3 bg-white shadow-md lg:hidden">
    <form method="GET" action="{% url 'home:search' %}">
      <input type="text" name="q" placeholder="Search..."
        class="w-full rounded-full px-4 py-2 border border-indigo-300 focus:ring-2 focus:ring-indigo-500 focus:outline-none">
    </form>
    {% if request.user.role == 'patient' %}
    <a href="{% url 'home:doctor' %}" class="font-medium text-gray-700 hover:text-indigo-600">Home</a>
    <a href="{% url 'profile:view_appointments' %}" class="font-medium text-gray-700 hover:text-indigo-600">Appointments</a>
    <a href="{% url 'profile:profile_patient' %}" class="font-medium text-gray-700 hover:text-indigo-600">Profile</a>
    {% endif %}
    {% if user.is_authenticated %}
    <form method="post" action="{% url 'user_account:logout' %}">
      {% csrf_token %}
      <button type="submit"
        class="bg-red-500 text-white rounded-full px-4 py-2 hover:bg-red-600 transition w-full">
        Logout
      </button>
    </form>
    {% else %}
    <a href="{% url 'user_account:login' %}" 
       class="bg-indigo-500 text-white rounded-full px-4 py-2 hover:bg-indigo-600 transition text-center">
      Login
    </a>
    <a href="{% url 'user_account:sign-up' %}" 
       class="border border-indigo-500 text-indigo-500 rounded-full px-4 py-2 hover:bg-indigo-50 transition text-center">
      Sign up
    </a>
    {% endif %}
  </div>
</nav>

<script>
  const toggle = document.getElementById("menu-toggle");
  const menu = document.getElementById("menu");
  const mobileMenu = document.getElementById("mobile-menu");

  toggle.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
</script>
